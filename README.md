# تطبيق رصد - ثانوية اليعقوبي الثانوية (Offline PWA)

تطبيق يعمل على الجوال/الكمبيوتر لمتابعة:
- الغياب والتأخر (حفظ تلقائي داخل ملف الطالب)
- المخالفات السلوكية (قائمة قابلة للتعديل)
- الطباعة: **كشف صف/شعبة** (الأحد→الخميس + عمود باركود رقم الهوية) + **كروت ورقية** للمتابعة
- نسخ احتياطي واستعادة (ملف JSON)

> يعمل بدون إنترنت **بعد التثبيت** (PWA) — البيانات تحفظ محليًا على الجهاز (IndexedDB).

---

## 1) تشغيل محليًا على الكمبيوتر (اختياري)
إذا أردت التجربة على الكمبيوتر قبل الرفع:
- افتح المجلد عبر خادم بسيط (مثل `python -m http.server`) ثم افتح `http://localhost:8000`

## 2) رفعه على GitHub Pages (مقترح)
1. أنشئ Repository جديد (مثلاً: `rsd-yaqubi`)
2. ارفع جميع الملفات كما هي داخل جذر المشروع
3. من Settings → Pages اختر Branch: `main` و Folder: `/root`
4. افتح الرابط الناتج
5. من الجوال: افتح الرابط عبر Safari/Chrome ثم **Add to Home Screen**

## 3) الاستيراد (طلاب)
يدعم:
- **CSV** (جاهز ويعمل دائمًا)
- **Excel (XLS/XLSX)** عند وضع ملف SheetJS محليًا

### CSV (موصى به)
- من داخل التطبيق: (الرئيسية → استيراد ملف الطلاب)
- اختر ملف CSV
- حدّد أعمدة: (اسم الطالب / رقم الهوية / الصف / الشعبة)
- استيراد

### Excel (اختياري)
ضع ملف `xlsx.full.min.js` داخل:
`/vendor/xlsx.full.min.js`
ثم سيعمل استيراد Excel.

> يمكن تحويل Excel إلى CSV بسهولة ثم الاستيراد مباشرة.

---

## 4) الطباعة (حسب طلبكم)
من صفحة **الطباعة**:
- اختر: نوع الكشف (تأخر/غياب)
- اختر: الصف + الشعبة
- اختر: الفصل الدراسي (الأول/الثاني)
- اكتب: العام الهجري
- اضغط: طباعة الكشف

الكشف يحتوي:
- اسم الطالب
- أعمدة الأيام: **الأحد – الإثنين – الثلاثاء – الأربعاء – الخميس**
- العمود الأخير: **باركود رقم هوية الطالب** (Code39)

---

## 5) النسخ الاحتياطي
من الإعدادات:
- تصدير نسخة احتياطية (ملف JSON)
- استعادة نسخة احتياطية

---

## 6) إعداد رسائل SMS + واتساب
التطبيق جاهز للواتساب (يفتح محادثة على رقم ولي الأمر).

بالنسبة لـ SMS:
- لأمان البيانات لا يتم وضع مفاتيح مزود SMS داخل التطبيق.
- يتم الإرسال عبر Cloudflare Worker Proxy.

### نموذج Cloudflare Worker (اختياري)
ملف جاهز: `cloudflare-worker-proxy.js`
ضعه في Worker ثم:
- ضع Secret للمزود (TOKEN / BASE_URL) حسب مزودك
- ضع APP_KEY خاص بك (للتطبيق)
ثم في التطبيق اكتب رابط الـ Worker و APP_KEY و Sender.

> إذا رغبت، أعطني اسم مزود الرسائل بالضبط + مثال طلب API وسأضبط الكود ليتوافق 100%.

---

## ملاحظات
- البيانات محلية على الجهاز: إذا تم حذف المتصفح أو مسح بيانات الموقع ستفقد البيانات (لذلك النسخ الاحتياطي مهم).
- تستطيع تشغيله على أكثر من جهاز عبر النسخ الاحتياطي والاستعادة.

